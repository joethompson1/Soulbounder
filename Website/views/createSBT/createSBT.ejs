<head>
	<!-- Preload Stylesheets -->
	<link rel="preload" href="/stylesheets/createSBTStyles/createSBT.css" as="style">

	<!-- Stylesheets -->
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
	<link rel="stylesheet" href="/stylesheets/logoStyles/logoLoadingAnimation.css">
	<link rel="stylesheet" href="/stylesheets/createSBTStyles/createSBT.css">
</head>

<body>
	<div class="hideHeader" id="hideHeader">
		
	</div>
	<div class="container text-center" id="loadingContainer">
		<div class="container loadingContainer">
			<%- include('../components/logoLoadingAnimation.ejs') %>
		</div>
		<div class="container loadingTextContainer" style="width: max-content;">
			<div id="contactingText">
				<h1 id="">Contacting the Interplantery File System...</h1>	
			</div>
			<div id="storingText">
				<h1 id="">Storing SBT Data on the Interplantery File System...</h1>
			</div>
		</div>
	</div>

	<div class="container formContainer" id="formContainer">
		<form name="sbtForm" id="sbtForm" method="POST" action="/createSBT">
			<div class="rowContainer">
				<div class="colContainer">
					<input class="SBTName" type="text" name="SBTName" placeholder="SBT Name" id="SBTName">
					<div class="dropdown">
						<input type="text" name="sbtType" id="sbtType">
						<div class="btn-lg dropbtn" id="dropDownButton">
							Account
						</div>
					</div>
				</div>

				<div class="colContainer">
					<div class="SBTPictureContainer">
						<label class="imageLabel" for="fileInput">
							<img class="SBTDisplayPicture" id="stockImage" src="/images/handWithPicture.png">
							<img class="displayImage" src="#" id="displayImage">
						</label>

						<input id="fileInput" type="file" onchange="readURL(this);" name="image">
						<input class="SBTPicture" type="text" name="SBTPicture" id=SBTPicture>
					</div>
				</div>
			</div>





			<!-- Account Form -->
			<div id="Account" class="account show"> 

				<div class="row emailContainer" id="">
					<input type="text" name="emailInput" class="emailInput" id="emailInput" placeholder="Your Email">
				</div>

				<div class="repeatingInputContainer" id="repeatingInputContainer">				
				</div>

				<div class="row createContainer" id="createInputButton">
					<div class="createNewInputButton">
						<img class="plusSquare" src="/images/plus-square.svg">
						<h2 class="createNewInputButton-text">Add Custom Field</h2>
					</div>
				</div>

				<div class="row">
					<button class="submitButton" id="accountSubitButton">Create!</button>
				</div>
			</div>
		</form>
	</div>




	<script type="text/javascript">
		$('div[id^=loadingContainer]').hide();
		$('div[id^=storingText').hide();
		$('div[id^=hideHeader').hide();
		var base64String = "";

		function readURL(input) {
			if (input.files && input.files[0]) {
				const file = input.files[0];
				var reader = new FileReader();


				reader.onload = function (e) {
					$('#displayImage').attr('src', e.target.result);
					$('#stockImage').hide();
					$('#displayImage').show();

					base64String = reader.result.split(',')[1];
					$('input.SBTPicture').val(base64String);

				}

				reader.readAsDataURL(input.files[0]);
			}
		}


		const createInputButton = document.querySelector('#createInputButton');
		var numberOfCustomInputs = 0

		createInputButton.addEventListener('click', (e) => {
			numberOfCustomInputs += 1;
			var repeatingInputContainer = document.getElementById('repeatingInputContainer');

			const divBlankInputContainer = document.createElement("div");
			divBlankInputContainer.className = 'row createContainer blankInputContainer';
			divBlankInputContainer.id = "blankInputBox"+numberOfCustomInputs;

			const blankInputTitle = document.createElement("input");
			blankInputTitle.className = "blankInputTitle";
			blankInputTitle.placeholder = "Title";
			blankInputTitle.type = "text";
			blankInputTitle.name = "blankInputLabel";
			blankInputTitle.id = "blankInputTitle"+numberOfCustomInputs;

			const blankInputContents = document.createElement("input");
			blankInputContents.className = "blankInputContents";
			blankInputContents.placeholder = "Contents";
			blankInputContents.type = "text";
			blankInputContents.name = "blankInputContent";
			blankInputContents.id = "blankInputContents"+numberOfCustomInputs;


			divBlankInputContainer.appendChild(blankInputTitle);
			divBlankInputContainer.appendChild(blankInputContents);

			divBlankInputContainer.innerHTML += `<div class="closeInputButton" id="closeInputButton${numberOfCustomInputs}" onclick="closeInput('blankInputBox${numberOfCustomInputs}')">X</div>`;

			repeatingInputContainer.appendChild(divBlankInputContainer);

		});



		function closeInput(blankInputBoxX) {
			document.getElementById(blankInputBoxX).remove();
		}




		$("#attendanceSubitButton").click(function(){
	        $('div[id^=formContainer]').fadeOut(2500);
			$('div[id^=loadingContainer]').delay(2500).fadeIn(2500);
			$('div[id^=hideHeader').delay(1500).fadeIn(500);

			$('div[id^=contactingText]').delay(7000).fadeOut(2500);
			$('div[id^=storingText]').delay(9600).fadeIn(2500);
			$('div[id^=storingText]').delay(17500).fadeOut(2500);
	    }); 

	</script>


</body>








